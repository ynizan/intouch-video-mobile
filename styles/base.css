/* ---------------------------------------------
   RESET & ROOT
--------------------------------------------- */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
:root {
  --gold: #D4A574;
  --gold-dim: rgba(212,165,116,0.35);
  --gold-glow: rgba(212,165,116,0.15);
  --sand: #DEDAD2;
  --sand-dark: #C8C4BC;
  --ink: #3A3830;
  --ink-light: #6A6660;
  --ink-faint: #9A9690;
}
body {
  background:#080808;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  min-height:100vh; font-family:'Manrope',sans-serif;
  overflow:hidden;
}

/* ---------------------------------------------
   PLAYER SHELL
--------------------------------------------- */
#player { display:flex; flex-direction:column; align-items:center; width:100%; }

/* 1280x720 scene canvas, scales to window */
#canvas {
  width:720px; height:1280px; position:relative; overflow:hidden;
  transform-origin:top left; flex-shrink:0;
  background:#111;
}

/* ---------------------------------------------
   SCENE BASE
--------------------------------------------- */
.scene {
  position:absolute; inset:0;
  opacity:0; pointer-events:none;
  transition:opacity 0.45s ease;
}
.scene.active { opacity:1; pointer-events:auto; }
.scene.no-fade { transition:none !important; }

/* ---------------------------------------------
   TYPE A -- WORD HIGHLIGHT
   Words start dim, activate gold, fade to normal
--------------------------------------------- */
.w {
  display:inline;
  transition:color 0.12s ease, text-shadow 0.12s ease, opacity 0.12s ease;
}
.w.future  { color:rgba(255,255,255,0.06) !important; }
.w.active  { color:var(--gold) !important; text-shadow:0 0 28px rgba(212,165,116,0.55); }
.w.past    { /* inherits scene default */ }

/* On light scenes, future words are near-invisible dark */
.scene-light .w.future { color:rgba(30,28,24,0.08) !important; }
.scene-light .w.active { color:var(--gold) !important; }
.scene-light .w.past   { /* inherits */ }

/* ---------------------------------------------
   TYPE B -- SIDE PANEL PHRASES
--------------------------------------------- */
.phrase {
  border-radius:8px; padding:14px 16px;
  border-left:2.5px solid transparent;
  transition:opacity 0.4s ease, transform 0.4s ease, background 0.3s ease, border-color 0.3s ease;
  opacity:0; transform:translateY(6px);
  margin-bottom:10px;
}
.phrase.future  { opacity:0; transform:translateY(6px); }
.phrase.active  {
  opacity:1; transform:translateY(0);
  background:rgba(212,165,116,0.06);
  border-left-color:var(--gold);
}
.phrase.past    {
  opacity:0.28; transform:translateY(0);
  background:transparent; border-left-color:transparent;
}
.phrase-eye {
  font-size:9px; font-weight:800; letter-spacing:0.14em;
  text-transform:uppercase; color:var(--ink-faint); margin-bottom:6px;
}
.phrase.active .phrase-eye { color:rgba(212,165,116,0.6); }
.phrase-txt {
  font-family:'IBM Plex Serif',serif; font-style:italic;
  font-size:15px; line-height:1.65; color:var(--ink-light);
}
.phrase-txt b  { font-style:normal; font-weight:700; color:var(--ink); }
.phrase-txt em { font-style:normal; font-weight:700; color:var(--ink); }
.phrase-txt .g { font-style:normal; font-family:'Manrope',sans-serif; font-weight:800; color:var(--gold); font-size:14px; }

/* ---------------------------------------------
   TYPE C -- FULL-WIDTH BOTTOM SUBTITLE BAR
--------------------------------------------- */
.narrator-card {
  position:absolute; bottom:0; left:0; right:0;
  min-height:340px; display:flex; flex-direction:column; justify-content:center;
  background:rgba(10,10,10,0.82);
  backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px);
  border-top:1px solid rgba(212,165,116,0.18);
  padding:28px 36px 36px;
  z-index:20;
  transform:translateY(100%); opacity:0;
  transition:transform 0.4s cubic-bezier(0.22,1,0.36,1), opacity 0.35s ease;
}
.narrator-card.nc-in  { transform:translateY(0); opacity:1; }
.narrator-card.nc-out { transform:translateY(100%); opacity:0; }
.nc-header {
  display:flex; align-items:center; gap:7px;
  margin-bottom:8px;
}
.nc-pulse {
  width:8px; height:8px; border-radius:50%;
  background:var(--gold); box-shadow:0 0 7px rgba(212,165,116,0.6);
  flex-shrink:0;
}
.nc-label { font-size:17px; font-weight:800; letter-spacing:0.1em; text-transform:uppercase; color:rgba(212,165,116,0.55); }
/* Override phrase styles inside narrator bar */
.narrator-card .phrase {
  margin-bottom:0; padding:0; border-left:none; border-radius:0;
  background:transparent !important;
}
.narrator-card .phrase.active { border-left:none; background:transparent !important; }
.narrator-card .phrase:not(.active) { display:none; }
.narrator-card .phrase-eye { display:none; }
.narrator-card .phrase-txt {
  font-size:42px; line-height:1.4; color:rgba(255,255,255,0.92);
}
.narrator-card .phrase-txt b  { color:#fff; }
.narrator-card .phrase-txt em { color:#fff; }
.narrator-card .phrase-txt .g { color:var(--gold); font-size:42px; }

/* ---------------------------------------------
   SHARED UI BITS
--------------------------------------------- */
.dot { width:11px; height:11px; border-radius:50%; flex-shrink:0; }
.dot.r{background:#E8685C;} .dot.a{background:#F5BD4F;} .dot.g{background:#61C554;}
.dot.dr{background:#D4887A;} .dot.da{background:#D4B87A;} .dot.dg{background:#8ABD8A;}

.window-chrome {
  display:flex; align-items:center; gap:7px; padding:10px 16px;
  border-bottom:1px solid rgba(0,0,0,0.08);
}
.chrome-title { flex:1; text-align:center; font-size:12px; font-weight:600; color:#888; }

.gold-badge {
  display:inline-flex; align-items:center; gap:6px;
  background:rgba(212,165,116,0.1); border:1.5px solid rgba(212,165,116,0.3);
  border-radius:100px; padding:4px 12px;
  font-size:10px; font-weight:800; color:var(--gold);
  letter-spacing:0.07em; text-transform:uppercase;
}
.gold-badge-dot { width:6px; height:6px; border-radius:50%; background:var(--gold); box-shadow:0 0 6px rgba(212,165,116,0.55); }

/* cal grid shared */
.cal-grid { display:grid; grid-template-columns:46px repeat(5,1fr); }
.tl { font-size:10px; font-weight:600; color:#CCC; }
.tl-light { color:#9AA0A6; }
.day-col { position:relative; border-left:1px solid rgba(0,0,0,0.05); }
.ev { position:absolute; left:3px; right:3px; border-radius:4px; padding:4px 8px; font-size:11px; overflow:hidden; }
.ev-n { font-weight:700; display:block; }
.ev-t { font-size:10px; display:block; margin-top:1px; }
.ev-d { font-size:9px; display:block; margin-top:1px; font-weight:600; }
.ev.gray { background:#E8E8E8; border-left:2.5px solid #BDBDBD; }
.ev.gray .ev-n{color:#5F6368;} .ev.gray .ev-t{color:#9AA0A6;} .ev.gray .ev-d{color:#BDBDBD;}
.ev.warm { background:#FFF3E0; border-left:2.5px solid #FFB300; }
.ev.warm .ev-n{color:#BF360C;font-weight:800;} .ev.warm .ev-t{color:#E65100;} .ev.warm .ev-d{color:#FF8F00;font-weight:800;}
.ev.gold-ev { background:rgba(212,165,116,0.15); border:1px solid rgba(212,165,116,0.3); border-left:3px solid var(--gold); }
.ev.gold-ev .ev-n{color:#A07030;font-weight:800;font-size:12px;} .ev.gold-ev .ev-t{color:#C49060;} .ev.gold-ev .ev-d{color:var(--gold);font-weight:800;font-size:9px;text-transform:uppercase;letter-spacing:0.04em;}
.ev.ghost-ev { background:transparent; border:1.5px dashed rgba(212,165,116,0.3); }
.ghost-inner { display:flex; align-items:center; gap:4px; font-size:10px; font-weight:600; color:rgba(212,165,116,0.35); }
.ghost-dot { width:5px; height:5px; border-radius:50%; background:rgba(212,165,116,0.35); }

/* stat bar */
.stats-bar {
  position:absolute; bottom:0; left:0; right:0;
  background:rgba(248,249,250,0.95); border-top:1px solid #E0E0E0;
  padding:8px 16px; display:flex; align-items:center; gap:20px;
}
.stat-item { display:flex; align-items:center; gap:6px; }
.stat-dot { width:9px; height:9px; border-radius:50%; flex-shrink:0; }
.sd-gray{background:#BDBDBD;} .sd-warm{background:#FFB300;} .sd-gold{background:var(--gold); box-shadow:0 0 5px rgba(212,165,116,0.5);}
.stat-lbl { font-size:10px; font-weight:600; color:#5F6368; }
.stat-num { font-size:12px; font-weight:800; color:#202124; margin-left:3px; }
.stat-num.gn { color:var(--gold); }
.cal-insight { margin-left:auto; font-family:'IBM Plex Serif',serif; font-style:italic; font-size:11px; color:#5F6368; }
.cal-insight b { font-style:normal; font-weight:500; color:var(--gold); }

/* ---------------------------------------------
   PLAYER CONTROLS
--------------------------------------------- */
#controls {
  background:#0D0D0D; border-top:1px solid #161616;
  flex-shrink:0;
}
#progress-track {
  height:3px; background:#1A1A1A; cursor:pointer; position:relative;
}
#progress-fill { height:100%; background:var(--gold); width:0%; }
#scene-markers { position:absolute; inset:0; pointer-events:none; }
.s-mark { position:absolute; top:0; bottom:0; width:1px; background:#2A2A2A; }

#ctrl-row {
  display:flex; align-items:center; padding:8px 12px; gap:10px;
}
.cbtn {
  width:32px; height:32px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; background:transparent; color:#555;
  font-size:13px; transition:all 0.15s; flex-shrink:0;
  border:none; outline:none;
}
.cbtn:hover { color:var(--gold); background:rgba(212,165,116,0.08); }
#btn-play { width:38px; height:38px; background:var(--gold); color:#0D0D0D; font-size:13px; }
#btn-play:hover { background:#E0B888; }
#time-disp { font-size:11px; font-weight:700; color:#3A3A3A; letter-spacing:0.06em; font-variant-numeric:tabular-nums; flex-shrink:0; }
#scene-info { flex:1; display:flex; flex-direction:column; align-items:center; gap:1px; }
#scene-lbl { font-size:11px; font-weight:700; color:#3A3A3A; letter-spacing:0.08em; text-transform:uppercase; }
#scene-ctr { font-size:10px; font-weight:600; color:#222; }

.spd-btn {
  font-size:10px; font-weight:800; color:#3A3A3A;
  border:1px solid #1E1E1E; border-radius:4px;
  padding:4px 8px; cursor:pointer; transition:all 0.15s; flex-shrink:0;
  background:transparent;
}
.spd-btn:hover { color:var(--gold); border-color:rgba(212,165,116,0.3); }
.spd-btn.on { color:var(--gold); border-color:rgba(212,165,116,0.4); background:rgba(212,165,116,0.06); }

#vo-toggle {
  font-size:10px; font-weight:800; color:#333; letter-spacing:0.08em;
  text-transform:uppercase; cursor:pointer; padding:4px 10px;
  border:1px solid #1E1E1E; border-radius:4px; transition:all 0.15s;
  flex-shrink:0; background:transparent;
}
#vo-toggle:hover { color:#888; border-color:#333; }
#vo-toggle.on { color:#888; border-color:#2A2A2A; }

/* Thumbnail strip */
#thumb-strip {
  display:flex; gap:5px; padding:8px 20px 11px;
  overflow-x:auto; scrollbar-width:none;
}
#thumb-strip::-webkit-scrollbar { display:none; }
.thumb {
  flex-shrink:0; width:36px; height:64px;
  border-radius:3px; border:1.5px solid #1A1A1A;
  cursor:pointer; overflow:hidden; position:relative;
  transition:border-color 0.15s;
}
.thumb:hover { border-color:#3A3A3A; }
.thumb.on { border-color:var(--gold); }
.thumb-preview { width:100%; height:100%; object-fit:cover; display:block; }
.thumb-lbl {
  position:absolute; bottom:0; left:0; right:0;
  background:rgba(0,0,0,0.75); font-size:7px; font-weight:700;
  color:#444; text-align:center; padding:2px 3px;
  letter-spacing:0.06em; text-transform:uppercase;
}
.thumb.on .thumb-lbl { color:var(--gold); }

/* ---------------------------------------------
   VO TICKER
--------------------------------------------- */
#vo-bar {
  width:100%; background:#000 !important; border-top:2px solid #D4A574;
  padding:0; overflow:hidden;
  max-height:0; transition:max-height 0.3s ease, padding 0.3s ease;
}
#vo-bar.open { max-height:60px; padding:11px 20px 12px; }
#vo-text {
  font-family:'IBM Plex Serif',serif; font-style:italic;
  font-size:15px; line-height:1.5; color:#FFFFFF !important;
  text-align:center; letter-spacing:0.01em;
}
#vo-text .vo-hl { font-style:normal; font-family:'Manrope',sans-serif; font-weight:800; color:var(--gold) !important; }

